
<!doctype html>

<!-- Coded by C. M. Mitchell
		-->

<html>
	<head>
		<meta charset="utf-8">
		<title>Map [v0.3.42] </title>

		<!-- Stylesheets -->
		<link rel="stylesheet" type="text/css" href="https://unpkg.com/leaflet@1.3.0/dist/leaflet.css" />
			<script type="text/javascript" src="https://unpkg.com/leaflet@1.3.0/dist/leaflet.js"></script>
			<link rel="stylesheet" type="text/css" href="https://cmmitchell.github.io/Webmap2/Stylesheets/ControlLayer.css"/>
			<script src="https://cmmitchell.github.io/Webmap2/Stylesheets/styledLayerControl.js"></script>
		<link rel="stylesheet" type="text/css" href="https://cmmitchell.github.io/Webmap2/Stylesheets/measure_tool.css"/>
		<link rel="stylesheet" type="text/css" href="https://cmmitchell.github.io/Webmap2/Stylesheets/css.css"/>
		<link href='https://api.mapbox.com/mapbox.js/plugins/leaflet-fullscreen/v1.0.1/leaflet.fullscreen.css' rel='stylesheet' />
			
	

		<!-- Javascript and other links-->
		
		<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
		<script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-fullscreen/v1.0.1/Leaflet.fullscreen.min.js'></script>
		<script type="text/javascript" src="https://cmmitchell.github.io/Webmap2/Java/gjson/measure_tool.js"></script>
		

		
		<!-- GeoJSON overlays -->
		<script type="text/javascript" src="https://cmmitchell.github.io/Locations/Location/Shapefile/caro_point.js"></script>
		<script type="text/javascript" src="https://cmmitchell.github.io/Locations/Location/Shapefile/caro_poly.js"></script>

		<!-- Broken Stuff -->
		


		

		
		
<!doctype html>

<!-- Coded by C. M. Mitchell
	 For some unknown reason...
		-->

		
	</head>
		<body>
	
		<!-- Fade auomation for text box/legend thing -->

			
	

						<!-- Logo or somthing -->
			</div>
			

			<div id="map"></div>
	
			<script>
			
			
			//calling geo JASON and embeded styles from javascript
			//============================================	
			//=================Background=================
			//============================================
			
			
			
				var a = L.geoJson(points, {
					style: pointcol})
					b = L.geoJson(polys, {
					style: polycol})

					

					
	//===============================Layer Groups=======================================
				
				//===================================================
				//assigning variables to layers for control
				//===================================================
				
					//=================background=================
				var aShp = L.layerGroup([a]),
					bShp = L.layerGroup([b]);
				
				//background images
				var OpenStreetMap_Mapnik = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
				maxZoom: 19,
				attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
				});
				var Esri_WorldImagery = L.tileLayer('http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
					attribution: 'Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community'
				});
	//this is a seperating line ----------------------------------------------------------------------------------
				//set map extent, view, and default layer
				var map = L.map('map', {
					zoomDelta: 0.15,
					zoomSnap: 0
					}).setView([0, 0], 4.5);
	//this is a seperating line ----------------------------------------------------------------------------------
			
				//Create Layered Groups
				//create basemaps variable to call within the control
				var baseMaps = [
						{ 
							groupName : "Background",
							expanded : true,
							layers    : {
								"Streets": OpenStreetMap_Mapnik,
								"Aerial": Esri_WorldImagery
							}
						}
						}							
				];	
				//create overlays variable to call within the control. Calls layer groups
				
				var overlays = [
						 {
							groupName : "Thing",
							expanded  : true,
							layers    : { 
								"Parcel":bShp,
								"Point":aShp
							}	
						 }							 
				];
				//================================================
				
				
				var options = {
					container_width 	: "180px",
					group_maxHeight     : "200px",
					//container_maxHeight : "350px", 
					exclusive       	: false,
					collapsed : true, 
					position: 'topright'
				};
		//this is a seperating line ----------------------------------------------------------------------------------
				
				//add control to map
				var control = L.Control.styledLayerControl(baseMaps, overlays, options);
				map.addControl(control);
				//Check this and associated scripts for errors. Displays tool, but not tool icon.  Error is likely in the script.
				var measureControl = new L.Control.Measure(
					{
						position: 'topright',
						primaryLengthUnit: 'meters',
						activeColor: '#ABE67E'
					}
				);
				measureControl.addTo(map);
				
					function getColor(d) {
					    return d > 350000  ? '#006739' :
						   d > 210000 ? '#238b45' :
						   d > 130000   ? '#2f9a52' :
						   d > 50000   ? '#41ab5d' :
						   d > 15000   ? '#67b469' :
							   d > 0   ? '#8cbf86' :
							      '#a1d99b';
										  //
										  //#c7e9c0
					}
				
					function getColorq(q) {
					    return q > 900000  ? '#006739' :
						   q > 500000 ? '#238b45' :
						   q > 325000   ? '#2f9a52' :
						   q > 150000   ? '#41ab5d' :
						   q > 50000   ? '#67b469' :
						   q > 0   ? '#8cbf86' :
							      '#a1d99b';
							
					}
					function getColorj(j) {
						return j === 'North' ? "#2b288b":
							j === 'North (Late)' ? "#15135e":
							j === 'N Assistance' ? "#54527c":
							j === 'South' ? "#b61515":
							j === 'South (Late)' ? "#8b2828":
							j === 'S Assistance' ? "#986161":
								"#878787";
							
					}
				
					function gregColor(a) {
						return a === 'Region 1' ? "#8e3774":
							a === 'Region 2' ? "#468935":
							a === 'Region 3' ? "#29ae60":
							a === 'Region 4' ? "#1f0d81":
							// #342969
							a === 'Region 5' ? "#9d1b2a":
							a === 'Region 6' ? "#5b7b4c":
							a === 'Region 7' ? "#2f5c7c":
							a === 'Region 8' ? "#b24936":
							a === 'Region 9' ? "#9c9960":
							a === 'Region 10' ? "#9a9945":
							a === 'Region 11' ? "#149b72":
							a === 'Region 12' ? "#542a8a":
							a === 'Region 13' ? "#bc7962":
							a === 'Region 14' ? "#42bd3d":
							a === 'Region 15' ? "#2c56b8":
							a === 'Region 16' ? "#4d5e44":
							a === 'Region 17' ? "#218c87":
								"#bcbcbc";
					}
				
					function GenColorsz(t) {
						return t === 'Guardian League' ? "#123254":
							t === 'Region' ? "#757f89":
							t === 'Military Rule' ? "#34495e":
							t === 'Guardian Military' ? "#1b4067":	
							t === 'Orkinus' ? "#69645f":
							t === 'Orkinus N' ? "#312f2d":
							t === 'Orkinus S' ? "#4b453f":
							t === 'Orkinus W' ? "#292929":
							t === 'Meridonia' ? "#750922":
							t === 'SE Meridonia' ? "#75090e":
							t === 'S Meridonia' ? "#601010":
							t === 'W Meridonia' ? "#60000a":
							t === 'E Meridonia' ? "#5c0606":
								"#5c1010";
					}
					
			//this is miles
				var legend = L.control({position: 'bottomright'});
				legend.onAdd = function (map) {
					var div = L.DomUtil.create('div', 'info legend'),
						grades = [0, 35000, 100000, 180000, 250000, 380000],
						labels = [],
						from, to;
					for (var i = 0; i < grades.length; i++) {
						div.innerHTML +=
						    '<span style="background:' + getColor(grades[i] + 1) + '"></span> ';
					    }
					    // a line break
					    div.innerHTML += '<br>';
					    // second loop for text
					    for (var i = 0; i < grades.length; i++) {
						div.innerHTML +=
						    '<label>' + grades[i] + (grades[i + 1] ? '&ndash;' + grades[i + 1] : '+') + '</label>';
					    }
					    return div;
					};
		//this is a seperating line ----------------------------------------------------------------------------------
				// this is kilometers
				var legendkm = L.control({position: 'bottomright'});
				legendkm.onAdd = function (map) {
					var div = L.DomUtil.create('div', 'info legend'),
						grades = [0, 90000, 250000, 465000, 800000, 1500000],
						labels = [];
					for (var i = 0; i < grades.length; i++) {
						div.innerHTML +=
						    '<span style="background:' + getColorq(grades[i] + 1) + '"></span> ';
					    }
					    // a line break
					    div.innerHTML += '<br>';
					    // second loop for text
					    for (var i = 0; i < grades.length; i++) {
						div.innerHTML +=
						    '<label>' + grades[i] + (grades[i + 1] ? '&ndash;' + grades[i + 1] : '+') + '</label>';
					    }
					    return div;
					};
				//this is a seperating line ----------------------------------------------------------------------------------
				// this is country?
				var legendGW = L.control({position: 'bottomright'});
				legendGW.onAdd = function (map) {
				var div = L.DomUtil.create('div', 'info legend'),
					labels = ['<strong>Sides</strong>'],
					categories = ['North', 'North (Late)', 'N Assistance', 'South', 'South (Late)',  
						      'S Assistance', 'Neutral'];
					
					for (var i = 0; i < categories.length; i++) {
					    div.innerHTML += 
					    labels.push(
						'<QS style="background:' + getColorj(categories[i]) + '"></QS> ' +
					    (categories[i] ? categories[i] : '+'));
					}
					div.innerHTML = labels.join('<br>');
				    return div;
				    };
		//this is a seperating line ----------------------------------------------------------------------------------	
				//Regions
				var legend2 = L.control({position: 'bottomright'});
				legend2.onAdd = function (map) {
				var div = L.DomUtil.create('div', 'info legend'),
					labels = ['<strong>Region</strong>'],
					categories = ['Region 1', 'Region 2', 'Region 3', 'Region 4', 'Region 5', 'Region 6', 'Region 7', 'Region 8', 'Region 9', 'Region 10', 'Region 11', 
						      'Region 12', 'Region 13', 'Region 14', 'Region 15', 'Region 16', 'Region 17', 'Region 18'];
					
					for (var i = 0; i < categories.length; i++) {
					    div.innerHTML += 
					    labels.push(
						'<QS style="background:' + gregColor(categories[i]) + '"></QS> ' +
					    (categories[i] ? categories[i] : '+'));
					}
					div.innerHTML = labels.join('<br>');
				    return div;
				    };
		//this is a seperating line ----------------------------------------------------------------------------------	
				var legendNA = L.control({position: 'bottomright'});
				legendNA.onAdd = function (map) {
				var div = L.DomUtil.create('div', 'info legend'),
					labels = ['<strong>Sides</strong>'],
					categories = ['Guardian League', 'Region', 'Military Rule', 'Guardian Military', 'Orkinus',
						      'Orkinus N', 'Orkinus S', 'Orkinus W', 'Meridonia', 'SE Meridonia',
						      'S Meridonia', 'W Meridonia', 'E Meridonia', 'Other'];
					
					for (var i = 0; i < categories.length; i++) {
					    div.innerHTML += 
					    labels.push(
						'<QS style="background:' + GenColorsz(categories[i]) + '"></QS> ' +
					    (categories[i] ? categories[i] : '+'));
					}
					div.innerHTML = labels.join('<br>');
				    return div;
				    };
						
	
			//this is a seperating line ----------------------------------------------------------------------------------	
				
				
				
				
			//this is a seperating line ----------------------------------------------------------------------------------	
				
				
				//categories = ;
				//this is a seperating line ------------------------------------------------
				map.on('overlayadd', function(eventLayer){
				    if (eventLayer.name === 'Nations 4075'){
					map.addControl(legendNA);
				    } else if (eventLayer.name === 'G.M.A. Region'){
					map.addControl(legend2);
				    } else if (eventLayer.name === 'Provinces (Km²)'){
					map.addControl(legendkm);
				    } else if (eventLayer.name === 'Global War II (6528)'){
					map.addControl(legendGW);
				    } else if (eventLayer.name === 'Provinces (Mi²)'){
					map.addControl(legend);
				    } 
				});
				//==========================================
				map.on('overlayremove', function(eventLayer){
				    if (eventLayer.name === 'Nations 4075'){
					 map.removeControl(legendNA);
				    } else if (eventLayer.name === 'G.M.A. Region'){
					 map.removeControl(legend2);
				    } else if (eventLayer.name === 'Provinces (Km²)'){
					 map.removeControl(legendkm);
				    } else if (eventLayer.name === 'Global War II (6528)'){
					 map.removeControl(legendGW);
				    } else if (eventLayer.name === 'Provinces (Mi²)'){
					 map.removeControl(legend);
				    } 
				});
				
				//legendGW.addTo(map);
				
				L.control.scale({maxWidth: 150}).addTo(map);
				L.control.fullscreen().addTo(map);
				//var poi1 = L.point(100, -180),
				//poi2 = L.point(-100, 180)
				    
				//L.bounds(poi1, poi2);		
				
				//L.map('map', {
        			
    				//});
				
			
			
			</script>
			
		</body>
